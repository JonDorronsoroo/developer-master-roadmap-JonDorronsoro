---
import SimplePageHeader from "../../components/SimplePageHeader.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import '../../styles/formulario.css';

const user = Astro.locals.user;
if (!user) {
    return Astro.redirect("/auth/signin");
}
---

<BaseLayout title="Onboarding" permalink="/addBD/addEtiqueta">
    <SimplePageHeader
        title="Añade una nueva etiqueta"
        description="Añade etiquetas para clasificar y personalizar recursos, categorías o roadmaps:"
    />

    <form id="etiquetaForm" class="form-container">
        <fieldset>
            <label class="required-field" for="tipo">Tipo de etiqueta:</label>
            <input
                type="text"
                id="tipo"
                name="tipo"
                required
                placeholder="Tipo de etiqueta (e.g., Rol, Dificultad)"
                aria-required="true"
            />

            <label class="required-field" for="valor">Valor de la etiqueta:</label>
            <input
                type="text"
                id="valor"
                name="valor"
                required
                placeholder="Valor de la etiqueta (e.g., Junior, Intermedio)"
                aria-required="true"
            />
        </fieldset>

        <fieldset>
            <label for="descripcion">Descripción (opcional):</label>
            <textarea
                id="descripcion"
                name="descripcion"
                cols="50"
                rows="5"
                placeholder="Describe el propósito de esta etiqueta..."
            ></textarea>
        </fieldset>

        <div class="button-container">
            <button type="submit">Guardar</button>
        </div>

        <div id="correct-message" class="message success"></div>
        <div id="error-message" class="message error"></div>
    </form>

    <script>
        import { setupFormSubmission } from '../../utils.js';

        // Setup form submission handling
        setupFormSubmission('etiquetaForm', '/api/addEtiqueta');
    </script>
</BaseLayout>



